{% extends "base.html" %}

{% block head %}
    <title>{{account.address}}</title>
{% endblock %}

{% block body %}

<div class='container'>
    <div class='page-header'>
        <h4>Account {{account.address}} {{ nano_org_account(account) }}</h4>
        <h5>{% if name %}{{name}}{% endif %}</h5>
    </div>

{% if last_blocks | length == 0 %}
    <i>No transactions</i>
{% else %}
    <table class="table table-striped table-sm table-hover" cellpadding=2 cellspacing=2>
        <thead>
        <tr>
            <th>Index
            <th>Hash
            <th class='text-center'>Balance
            <th>Type
            <th class='text-center'>Amount
            <th>&nbsp;
            <th colspan="2">Other
        </tr>
        </thead>
        <tbody>
        {% for block in last_blocks %}
            {% set type = block.type %}
            {% set balance = block.balance() %}
            {% set amount = block.amount() %}
            {% set other = block.other() %}
            <tr>
                <td class='text-right'>{{block.chain_index()}}
                <td><a href="/block/{{block.id}}">{{ block.hash() | format_hash }}</a>
                <td class='text-right'><a href="/block/{{block.id}}">{% if balance is not none %}{{ balance | format_amount3 }}{% endif %}</a>
                <td class='text-left'><a href="/block/{{block.id}}">{{ block.type }}</a>
                <td class='text-right text-nowrap'>{% if amount -%}
                    {%- if type == "send" -%}
                        <font style="color: #ff0000">{{ amount | format_amount3 }} XRB</font>
                    {%- else -%}
                        <font style="color: #00c000">{{ amount | format_amount3 }} XRB</font>
                    {%- endif -%}
                {%- else -%}
                    n/a
                {%- endif %}
                
                {% if type == "send" -%}
                    <td class='text-center'>TO
                    <td class='text-left text-nowrap'><a href="/account/{{ block.destination().id }}">{{ block.destination() | account_link(show_address=False) }}</a>
                {%- elif type in ["open", "receive"] and other -%}
                    <td class='text-center'>FROM
                    <td class='text-left text-nowrap'><a href="/account/{{ other.account().id }}">{{ other.account() | account_link(show_address=False) }}</a>
                {%- else -%}
                    <td>&nbsp;
                    <td>&nbsp;
                {%- endif %}
                
                {% if other -%}
                    <td><a href="/block/{{other.id}}">{{ other.hash() | format_hash }}</a>
                {%- else -%}
                    {%- if type == "send" -%}
                        <td><i>Not pocketed</i>
                    {%- else -%}
                        <td>&nbsp;
                    {%- endif %}
                {%- endif %}
            </tr>
        {% endfor %}
        {% if last_blocks[-1].chain_index() > 0 %}
        <tr>
            <td>...
            <td>...
            <td>...
            <td>...
            <td>...
            <td>...
            <td>...
        </tr>
        {% endif %}
        </tbody>
    <table>
{% endif %}
</div>

{% endblock %}
